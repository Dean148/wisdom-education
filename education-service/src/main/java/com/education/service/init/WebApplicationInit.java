package com.education.service.init;import com.education.mapper.common.component.SpringBeanManager;import com.education.mapper.mapper.system.SystemDictMapper;import com.education.service.task.BaseTask;import org.springframework.beans.factory.DisposableBean;import org.springframework.boot.ApplicationArguments;import org.springframework.boot.ApplicationRunner;import org.springframework.context.annotation.Lazy;import org.springframework.stereotype.Component;import java.util.HashMap;import java.util.List;import java.util.Map;/** * 系统启动完成之前加载数据 * @author zengjintao * @create 2019/5/8 16:26 * @since 1.0 **/@Component@Lazy(false)public class WebApplicationInit implements ApplicationRunner, DisposableBean {    @Override    public void run(ApplicationArguments args) throws Exception {        // 初始化试题类型        SystemDictMapper systemDictMapper = SpringBeanManager.getBean(SystemDictMapper.class);        Map params = new HashMap<>();        params.put("type", "question_type");        List<Map> list = systemDictMapper.queryList(params);        list.stream().forEach(item -> {            BaseTask.putQuestionType((String)item.get("value"), (Integer)item.get("code"));        });        // 初始化小学数据        params.put("type", "grade_type");        params.put("parent_id", 1);        List<Map> primarySchoolList = systemDictMapper.queryList(params);        primarySchoolList.stream().forEach(item -> {            BaseTask.putPrimarySchool((String)item.get("value"), (Integer)item.get("code"));            BaseTask.putSchool((Integer)item.get("code"), (String)item.get("value"));        });        params.put("parent_id", 2);        List<Map> middleSchoolList = systemDictMapper.queryList(params);        middleSchoolList.stream().forEach(item -> {            BaseTask.putMiddleSchool((String)item.get("value"), (Integer)item.get("code"));            BaseTask.putSchool((Integer)item.get("code"), (String)item.get("value"));        });        params.put("parent_id", 3);        List<Map> highSchoolList = systemDictMapper.queryList(params);        highSchoolList.stream().forEach(item -> {            BaseTask.putHighSchool((String)item.get("value"), (Integer)item.get("code"));            BaseTask.putSchool((Integer)item.get("code"), (String)item.get("value"));        });    }    @Override    public void destroy() throws Exception {        BaseTask.clearMap();    }}