package com.education.mapper.common.exception;import com.education.mapper.common.utils.ResultCode;import lombok.extern.slf4j.Slf4j;import org.apache.shiro.authz.UnauthorizedException;import org.springframework.web.bind.annotation.ControllerAdvice;import org.springframework.web.bind.annotation.ExceptionHandler;import org.springframework.web.bind.annotation.ResponseBody;import org.springframework.web.multipart.MaxUploadSizeExceededException;import java.util.HashMap;import java.util.Map;/** * 捕获系统异常 * @author zengjintao * @create 2019/3/25 9:24 * @since 1.0 **/@ControllerAdvice@Slf4jpublic class SystemExceptionHandler {    @ExceptionHandler(Exception.class)    @ResponseBody    public Map resolveException(Exception ex) {        Map result = new HashMap<>();        if (ex instanceof BusinessException) {            BusinessException exception = (BusinessException)ex;            result.put("code", exception.getResultCode());            result.put("message", exception.getResultCode().getMessage());        } else if (ex instanceof UnauthorizedException) {            result.put("code", ResultCode.NO_PERMISSION);            result.put("message", "权限不足,无法访问");        } else if (ex instanceof MaxUploadSizeExceededException) {            result.put("code", ResultCode.FAIL);            result.put("message", "文件不能超过200M, 请重新上传");        } else {            result.put("code", ResultCode.FAIL);            result.put("message", "系统异常");        }        log.error("系统异常", ex);        return result;    }}