package com.education.common.config;import com.education.common.cache.FstRedisSerializer;import com.education.common.constants.Constants;import com.education.common.model.JwtToken;import com.education.common.model.WeChatInfo;import com.jfinal.weixin.sdk.api.ApiConfig;import com.jfinal.weixin.sdk.api.ApiConfigKit;import org.springframework.beans.factory.annotation.Value;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.data.redis.connection.RedisConnectionFactory;import org.springframework.data.redis.core.RedisTemplate;import org.springframework.data.redis.serializer.RedisSerializer;/** * 系统bean 配置 * @author zengjintao * @create 2019/3/29 14:01 * @since 1.0 **/@Configurationpublic class BeanConfiguration {    @Bean    public RedisTemplate redisTemplate(RedisConnectionFactory redisConnectionFactory) {        //配置redisTemplate        RedisTemplate redisTemplate = new RedisTemplate();        redisTemplate.setConnectionFactory(redisConnectionFactory);        //设置序列化        RedisSerializer redisSerializer = new FstRedisSerializer();        redisTemplate.setKeySerializer(redisSerializer);//key序列化        redisTemplate.setValueSerializer(redisSerializer);//value序列化        redisTemplate.setHashKeySerializer(redisSerializer);//Hash key序列化        redisTemplate.setHashValueSerializer(redisSerializer);//Hash value序列化        redisTemplate.afterPropertiesSet();        return redisTemplate;    }  /*  @Bean    public CacheManager cacheManager() {        InputStream inputStream = this.getClass().getClassLoader().getResourceAsStream("ehcache.xml");        return CacheManager.create(inputStream);    }    @Bean    public EhcacheBean ehcacheBean(CacheManager cacheManager) {        return new EhcacheBean(cacheManager);    }*/    @Bean    public JwtToken frontJwtToken() {        return new JwtToken(Constants.EDUCATION_FRONT_SECRET_KEY);    }    @Bean    public JwtToken adminJwtToken() {        return new JwtToken(Constants.EDUCATION_ADMIN_SECRET_KEY);    }    @Value("${weChat.appId}")    private String appId;    @Value("${weChat.token}")    private String token;    @Value("${weChat.appSecret}")    private String appSecret;    @Bean    public WeChatInfo weChatInfo() {        WeChatInfo weChatInfo = new WeChatInfo();        weChatInfo.setAppId(appId);        weChatInfo.setToken(token);        weChatInfo.setAppSecret(appSecret);        return weChatInfo;    }    @Bean    public ApiConfig apiConfig(WeChatInfo weChatInfo) {        ApiConfig apiConfig = new ApiConfig();        apiConfig.setAppId(weChatInfo.getAppId());        apiConfig.setAppSecret(weChatInfo.getAppSecret());        ApiConfigKit.setThreadLocalAppId(weChatInfo.getAppId());        ApiConfigKit.putApiConfig(apiConfig);        return apiConfig;    }}